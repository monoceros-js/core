var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=function(t){return t&&t.Math==Math&&t},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")(),o=function(t){try{return!!t()}catch(t){return!0}},i=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,s={f:u&&!c.call({1:2},1)?function(t){var e=u(this,t);return!!e&&e.enumerable}:c},a=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},f={}.toString,l=function(t){return f.call(t).slice(8,-1)},p="".split,h=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==l(t)?p.call(t,""):Object(t)}:Object,y=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},v=function(t){return h(y(t))},d=function(t){return"object"==typeof t?null!==t:"function"==typeof t},g=function(t,e){if(!d(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!d(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!d(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!d(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},m={}.hasOwnProperty,b=function(t,e){return m.call(t,e)},w=r.document,S=d(w)&&d(w.createElement),O=!i&&!o((function(){return 7!=Object.defineProperty((t="div",S?w.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),E=Object.getOwnPropertyDescriptor,j={f:i?E:function(t,e){if(t=v(t),e=g(e,!0),O)try{return E(t,e)}catch(t){}if(b(t,e))return a(!s.f.call(t,e),t[e])}},T=function(t){if(!d(t))throw TypeError(String(t)+" is not an object");return t},M=Object.defineProperty,P={f:i?M:function(t,e,n){if(T(t),e=g(e,!0),T(n),O)try{return M(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},x=i?function(t,e,n){return P.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t},L=function(t,e){try{x(r,t,e)}catch(n){r[t]=e}return e},A=r["__core-js_shared__"]||L("__core-js_shared__",{}),_=Function.toString;"function"!=typeof A.inspectSource&&(A.inspectSource=function(t){return _.call(t)});var N,I,C,R,k=A.inspectSource,D=r.WeakMap,z="function"==typeof D&&/native code/.test(k(D)),F=e((function(t){(t.exports=function(t,e){return A[t]||(A[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),G=0,$=Math.random(),V=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++G+$).toString(36)},H=F("keys"),q={},B=r.WeakMap;if(z){var U=new B,W=U.get,K=U.has,Y=U.set;N=function(t,e){return Y.call(U,t,e),e},I=function(t){return W.call(U,t)||{}},C=function(t){return K.call(U,t)}}else{var J=H[R="state"]||(H[R]=V(R));q[J]=!0,N=function(t,e){return x(t,J,e),e},I=function(t){return b(t,J)?t[J]:{}},C=function(t){return b(t,J)}}var Q,X,Z={set:N,get:I,has:C,enforce:function(t){return C(t)?I(t):N(t,{})},getterFor:function(t){return function(e){var n;if(!d(e)||(n=I(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},tt=e((function(t){var e=Z.get,n=Z.enforce,o=String(String).split("String");(t.exports=function(t,e,i,c){var u=!!c&&!!c.unsafe,s=!!c&&!!c.enumerable,a=!!c&&!!c.noTargetGet;"function"==typeof i&&("string"!=typeof e||b(i,"name")||x(i,"name",e),n(i).source=o.join("string"==typeof e?e:"")),t!==r?(u?!a&&t[e]&&(s=!0):delete t[e],s?t[e]=i:x(t,e,i)):s?t[e]=i:L(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||k(this)}))})),et=r,nt=function(t){return"function"==typeof t?t:void 0},rt=function(t,e){return arguments.length<2?nt(et[t])||nt(r[t]):et[t]&&et[t][e]||r[t]&&r[t][e]},ot=Math.ceil,it=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?it:ot)(t)},ut=Math.min,st=function(t){return t>0?ut(ct(t),9007199254740991):0},at=Math.max,ft=Math.min,lt=function(t){return function(e,n,r){var o,i=v(e),c=st(i.length),u=function(t,e){var n=ct(t);return n<0?at(n+e,0):ft(n,e)}(r,c);if(t&&n!=n){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},pt={includes:lt(!0),indexOf:lt(!1)}.indexOf,ht=function(t,e){var n,r=v(t),o=0,i=[];for(n in r)!b(q,n)&&b(r,n)&&i.push(n);for(;e.length>o;)b(r,n=e[o++])&&(~pt(i,n)||i.push(n));return i},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],vt=yt.concat("length","prototype"),dt={f:Object.getOwnPropertyNames||function(t){return ht(t,vt)}},gt={f:Object.getOwnPropertySymbols},mt=rt("Reflect","ownKeys")||function(t){var e=dt.f(T(t)),n=gt.f;return n?e.concat(n(t)):e},bt=function(t,e){for(var n=mt(e),r=P.f,o=j.f,i=0;i<n.length;i++){var c=n[i];b(t,c)||r(t,c,o(e,c))}},wt=/#|\.prototype\./,St=function(t,e){var n=Et[Ot(t)];return n==Tt||n!=jt&&("function"==typeof e?o(e):!!e)},Ot=St.normalize=function(t){return String(t).replace(wt,".").toLowerCase()},Et=St.data={},jt=St.NATIVE="N",Tt=St.POLYFILL="P",Mt=St,Pt=j.f,xt=function(t,e){var n,o,i,c,u,s=t.target,a=t.global,f=t.stat;if(n=a?r:f?r[s]||L(s,{}):(r[s]||{}).prototype)for(o in e){if(c=e[o],i=t.noTargetGet?(u=Pt(n,o))&&u.value:n[o],!Mt(a?o:s+(f?".":"#")+o,t.forced)&&void 0!==i){if(typeof c==typeof i)continue;bt(c,i)}(t.sham||i&&i.sham)&&x(c,"sham",!0),tt(n,o,c,t)}},Lt=Array.isArray||function(t){return"Array"==l(t)},At=function(t){return Object(y(t))},_t=function(t,e,n){var r=g(e);r in t?P.f(t,r,a(0,n)):t[r]=n},Nt=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),It=Nt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ct=F("wks"),Rt=r.Symbol,kt=It?Rt:Rt&&Rt.withoutSetter||V,Dt=function(t){return b(Ct,t)||(Nt&&b(Rt,t)?Ct[t]=Rt[t]:Ct[t]=kt("Symbol."+t)),Ct[t]},zt=Dt("species"),Ft=function(t,e){var n;return Lt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Lt(n.prototype)?d(n)&&null===(n=n[zt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Gt=rt("navigator","userAgent")||"",$t=r.process,Vt=$t&&$t.versions,Ht=Vt&&Vt.v8;Ht?X=(Q=Ht.split("."))[0]+Q[1]:Gt&&(!(Q=Gt.match(/Edge\/(\d+)/))||Q[1]>=74)&&(Q=Gt.match(/Chrome\/(\d+)/))&&(X=Q[1]);var qt=X&&+X,Bt=Dt("species"),Ut=function(t){return qt>=51||!o((function(){var e=[];return(e.constructor={})[Bt]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Wt=Dt("isConcatSpreadable"),Kt=qt>=51||!o((function(){var t=[];return t[Wt]=!1,t.concat()[0]!==t})),Yt=Ut("concat"),Jt=function(t){if(!d(t))return!1;var e=t[Wt];return void 0!==e?!!e:Lt(t)};xt({target:"Array",proto:!0,forced:!Kt||!Yt},{concat:function(t){var e,n,r,o,i,c=At(this),u=Ft(c,0),s=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?c:arguments[e],Jt(i)){if(s+(o=st(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,s++)n in i&&_t(u,s,i[n])}else{if(s>=9007199254740991)throw TypeError("Maximum allowed index exceeded");_t(u,s++,i)}return u.length=s,u}});var Qt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Xt=[].push,Zt=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,c=5==t||i;return function(u,s,a,f){for(var l,p,y=At(u),v=h(y),d=function(t,e,n){if(Qt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}(s,a,3),g=st(v.length),m=0,b=f||Ft,w=e?b(u,g):n?b(u,0):void 0;g>m;m++)if((c||m in v)&&(p=d(l=v[m],m,y),t))if(e)w[m]=p;else if(p)switch(t){case 3:return!0;case 5:return l;case 6:return m;case 2:Xt.call(w,l)}else if(o)return!1;return i?-1:r||o?o:w}},te={forEach:Zt(0),map:Zt(1),filter:Zt(2),some:Zt(3),every:Zt(4),find:Zt(5),findIndex:Zt(6)},ee=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))},ne=Object.defineProperty,re={},oe=function(t){throw t},ie=function(t,e){if(b(re,t))return re[t];e||(e={});var n=[][t],r=!!b(e,"ACCESSORS")&&e.ACCESSORS,c=b(e,0)?e[0]:oe,u=b(e,1)?e[1]:void 0;return re[t]=!!n&&!o((function(){if(r&&!i)return!0;var t={length:-1};r?ne(t,1,{enumerable:!0,get:oe}):t[1]=1,n.call(t,c,u)}))},ce=te.forEach,ue=ee("forEach"),se=ie("forEach"),ae=ue&&se?[].forEach:function(t){return ce(this,t,arguments.length>1?arguments[1]:void 0)};xt({target:"Array",proto:!0,forced:[].forEach!=ae},{forEach:ae});var fe=te.map,le=Ut("map"),pe=ie("map");xt({target:"Array",proto:!0,forced:!le||!pe},{map:function(t){return fe(this,t,arguments.length>1?arguments[1]:void 0)}});var he=P.f,ye=Function.prototype,ve=ye.toString,de=/^\s*function ([^ (]*)/;i&&!("name"in ye)&&he(ye,"name",{configurable:!0,get:function(){try{return ve.call(this).match(de)[1]}catch(t){return""}}});for(var ge in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var me=r[ge],be=me&&me.prototype;if(be&&be.forEach!==ae)try{x(be,"forEach",ae)}catch(t){be.forEach=ae}}function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&je(t,e)}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function je(t,e){return(je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Me(t,e,n){return(Me=Te()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&je(o,n.prototype),o}).apply(null,arguments)}function Pe(t){var e="function"==typeof Map?new Map:void 0;return(Pe=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Me(t,arguments,Ee(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),je(r,t)})(t)}function xe(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Le(t){return function(){var e,n=Ee(t);if(Te()){var r=Ee(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return xe(this,e)}}function Ae(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,u=t[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||Ne(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(t){return function(t){if(Array.isArray(t))return Ie(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Ne(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(t,e){if(t){if("string"==typeof t)return Ie(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(t,e):void 0}}function Ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ce=function(t){return t===1/0},Re=function(t){return"function"==typeof t};function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ze(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Fe(t,e,n){return(Fe=ze()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&De(o,n.prototype),o}).apply(null,arguments)}function Ge(t){var e="function"==typeof Map?new Map:void 0;return(Ge=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Fe(t,arguments,ke(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),De(r,t)})(t)}function $e(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var Ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(r,Ge(Error));var e,n=(e=r,function(){var t,n=ke(e);if(ze()){var r=ke(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return $e(this,t)});function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=n.call(this)).name=e.constructor.name,e.message=t,e}return r}();function Cluster(t){this.parent=t||1/0,this.entities={},this.register=function(t,e,n){n&&Re(n)&&(n={type:n}),n=n||{};for(var r=arguments.length,o=new Array(r>3?r-3:0),i=3;i<r;i++)o[i-3]=arguments[i];this.entities[t]={$uninitialized:e,$type:n.type||Cluster.Body,$dependencies:n.dependencies||e.$dependencies||[],$args:o&&o.length>0?o:[]}},this.createCluster=function(){return new Cluster(this)},this.resolve=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(n=n||[],this.entities.hasOwnProperty(t))return this.applyEntityType(t,n).resolve();if(!Ce(this.parent)&&this.parent.entities.hasOwnProperty(t))return this.parent.applyEntityType(t,n).resolve();throw new Ve('Could not resolve entity named "'.concat(t,'"'))},this.applyEntityType=function(t,e){var n=this.entities[t],r=n,o=r.$uninitialized,i=r.$type,c=r.$dependencies,u=r.$args;return o?(n=this.resolveDependencies(o,c,u.concat(e)),this.entities[t]=new i(n),this.entities[t]):n},this.resolveDependencies=function(t,e,n){var r=this;if(!Re(t))return t;if(0===e.length&&0===n.length)return t;var o=[];return e.length>0&&e.forEach((function(t){o.push(r.resolve(t))})),o.unshift({}),t.bind.apply(t,o.concat(n))}}Cluster.Body=function(t){this.resolve=function(){return t}},Cluster.Singleton=function(t){var e;this.resolve=function(){return e||(e=t()),e}},Cluster.Instance=function(t){this.resolve=function(){return new t}};var He=Object.keys||function(t){return ht(t,yt)},qe=s.f,Be=function(t){return function(e){for(var n,r=v(e),o=He(r),c=o.length,u=0,s=[];c>u;)n=o[u++],i&&!qe.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},Ue={entries:Be(!0),values:Be(!1)}.entries;xt({target:"Object",stat:!0},{entries:function(t){return Ue(t)}});var We=function(t){return function(e,n,r,o){Qt(n);var i=At(e),c=h(i),u=st(i.length),s=t?u-1:0,a=t?-1:1;if(r<2)for(;;){if(s in c){o=c[s],s+=a;break}if(s+=a,t?s<0:u<=s)throw TypeError("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=a)s in c&&(o=n(o,c[s],s,i));return o}},Ke={left:We(!1),right:We(!0)}.left,Ye=ee("reduce"),Je=ie("reduce",{1:0});xt({target:"Array",proto:!0,forced:!Ye||!Je},{reduce:function(t){return Ke(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}}),xt({target:"Object",stat:!0,forced:o((function(){He(1)}))},{keys:function(t){return He(At(t))}});var Qe=function(t){return t&&"object"===we(t)&&t.constructor===Object},Xe=function(t){return t&&Array.isArray(t)},Ze=function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce((function(e,n){return Object.keys(n).forEach((function(r){var o=e[r],i=n[r];Xe(o)&&Xe(i)?e[r]=o.concat.apply(o,_e(i)):Qe(o)&&Qe(i)?e[r]=t(o,i):e[r]=i})),e}),{})},tn=function(t,e){return"[data-".concat(t).concat(e,"]")},en=function(t,e){return"".concat(t,"in-").concat(e)},nn=function(t){return t<10?"0"+t:t},rn=function(){var t=new Date,e=nn(t.getHours()),n=nn(t.getMinutes()),r=nn(t.getSeconds()),o=t.getMilliseconds();return"".concat(e,":").concat(n,":").concat(r,".").concat(o)},on=function(t){Oe(n,Pe(Error));var e=Le(n);function n(t){var r;return Se(this,n),(r=e.call(this)).name=r.constructor.name,r.message=t,r}return n}(),MonocerosCoreError=function(t){Oe(MonocerosCoreError,on);var e=Le(MonocerosCoreError);function MonocerosCoreError(t){return Se(this,MonocerosCoreError),e.call(this,t)}return MonocerosCoreError}(),cn=new Cluster;cn.register("defaultOptions",{classNamePrefix:"u_",selectorPrefix:"monoceros-",debug:!1,base:{viewport:"viewport",container:"container",item:"item"}}),cn.register("version","1.0.3"),cn.register("createOptions",(function(){var t=Ze.apply(void 0,arguments);if(t.base){t.selectors||(t.selectors={}),t.classNames||(t.classNames={});for(var e=0,n=Object.entries(t.base);e<n.length;e++){var r=Ae(n[e],2),o=r[0],i=r[1];t.selectors[o]=tn(t.selectorPrefix,i),t.classNames["in_"+o]=en(t.classNamePrefix,i)}}return t})),cn.register("createObserver",(function(t){var e=t.root,n=t.className,r=t.threshold,o=t.rootMargin,i=t.cb;return r=r||0,o=o||"0px",new IntersectionObserver((function(t){t.forEach((function(t,e){var r=t.isIntersecting,o=t.target;r?o.classList.contains(n)||o.classList.add(n):o.classList.contains(n)&&o.classList.remove(n),i&&i(t,e)}))}),{root:e,threshold:r,rootMargin:o})})),cn.register("createMonocerosInstance",(function(t){return{el:t,inView:!1,x:{start:0,current:0,end:0},y:{start:0,current:0,end:0}}})),cn.register("log",(function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=console).info.apply(t,["[".concat(rn(),"] ")].concat(n))})),cn.register("logError",(function(t){console.error=t})),cn.register("isArray",Xe),cn.register("MonocerosError",on),cn.register("MonocerosCoreError",MonocerosCoreError);var un=new function(t){var e=this;this.name="@monoceros/core",this.cluster=t,this.plugins=[],this.uninitialized_plugins=[],this.instances=[],this.version=this.cluster.resolve("version")||null,this.log=this.cluster.resolve("log"),this.defaults=this.cluster.resolve("defaultOptions"),this.options=this.cluster.resolve("createOptions",this.defaults)(),this.MonocerosCoreError=this.cluster.resolve("MonocerosCoreError"),this.set=function(t){return t.debug&&e.log("SETTING OPTIONS"),e.options=e.cluster.resolve("createOptions")(e.options,t),e},this.use=function(t,n){if(e.options.debug&&e.log("USING PLUGIN"),t){var r=e.cluster.resolve("isArray"),o=[];if(r(t))t.forEach((function(t){if(r(t))return o.push(t);o.push([t,{}])}));else{var i=t;o.push([i,n||{}])}return e.uninitialized_plugins=e.uninitialized_plugins.concat(o),e}e.options.debug&&e.log("No plugins found to be initialized. Make sure to pass a plugin function to .use()")},this.init=function(){var t=this;this.options.debug&&this.log("STARTING INIT"),this.cluster.register("options",this.options);var e=this.cluster.resolve("createObserver");return function(){if(t.options.debug&&t.log("-- init viewport"),t.dom={html:document.documentElement,body:document.body,viewport:document.querySelector(t.options.selectors.viewport)},!t.dom.viewport)throw new t.MonocerosCoreError("Missing ".concat(t.options.selectors.viewport," element. Canceling Monoceros initialization."));t.dom.viewport.nodeType&&(t.dom.viewport.style="\n          position: fixed;\n          height: 100vh;\n          width: 100vw;\n          overflow-x: hidden;\n          overflow-y: scroll;\n        "),t.cluster.register("dom",t.dom)}(),function(){t.options.debug&&t.log("-- init containers");var n=e({root:t.dom.viewport,className:t.options.classNames.in_viewport}),r=document.querySelectorAll(t.options.selectors.container);0!==r.length?r.forEach((function(t){t.style="\n          overflow: hidden;\n          position: relative;\n        ",n.observe(t)})):t.options.debug&&t.log("No ".concat(t.options.selectors.container," elements found. If you are expecting containers, check your html for naming issues."))}(),function(){t.options.debug&&t.log("-- init instances");var n=t.cluster.resolve("createMonocerosInstance"),r=_e(document.querySelectorAll(t.options.selectors.item));if(0!==r.length){r.forEach((function(e){t.instances.push(n(e))}));var o=e({root:t.dom.viewport,className:t.options.classNames.in_viewport});t.instances.forEach((function(n){var r=n.el;o.observe(r);var i=r.closest(t.options.selectors.container);i?e({root:i,className:t.options.classNames.in_container}).observe(r):r.classList.add(t.options.classNamePrefix+"no-container-parent")}))}else t.options.debug&&t.log("No ".concat(t.options.selectors.item," elements found. If you are expecting them to be found, check your html elements for naming issues."))}(),t.options.debug&&t.log("-- init plugins"),0!==t.uninitialized_plugins.length?t.plugins=t.uninitialized_plugins.map((function(e){var n=Ae(e,2),r=n[0],o=n[1],i=new r(t.cluster,o);return i.init(),t.options.debug&&t.log('-- initialized plugin "'.concat(i.name,'"')),i})):t.options.debug&&t.log("No plugins found."),this.options.debug&&this.log("INIT FINISHED"),{name:this.name,version:this.version,plugins:this.plugins,options:this.options,cluster:this.cluster}}}(cn);export default un;
